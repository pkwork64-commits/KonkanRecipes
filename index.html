<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mom's Konkan Kitchen</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;
        
        const RecipeApp = () => {
            const [recipes, setRecipes] = useState([
                {
                    id: 1,
                    name: "Mom's Fish Curry",
                    snippet: "Put coconut, green chilies in mixer. Fry fish first. Then add curry leaves, mustard seeds tadka. Don't forget tamarind!",
                    ingredients: ["Fish (pomfret)", "Coconut", "Green chilies", "Curry leaves", "Mustard seeds", "Tamarind", "Onions", "Turmeric"],
                    instructions: ["Grind coconut with green chilies to make paste", "Fry fish pieces until golden", "Heat oil, add mustard seeds and curry leaves", "Add onions, cook until soft", "Add coconut paste and tamarind water", "Add fried fish and simmer"],
                    cookTime: "30 mins",
                    serves: "4",
                    isComplete: true
                }
            ]);
            
            const [showAddForm, setShowAddForm] = useState(false);
            const [editingId, setEditingId] = useState(null);
            const [newRecipe, setNewRecipe] = useState({
                name: '',
                snippet: '',
                ingredients: [],
                instructions: [],
                cookTime: '',
                serves: ''
            });

            const addRecipe = () => {
                if (newRecipe.name && newRecipe.snippet) {
                    const recipe = {
                        id: Date.now(),
                        ...newRecipe,
                        isComplete: false
                    };
                    setRecipes([...recipes, recipe]);
                    setNewRecipe({
                        name: '',
                        snippet: '',
                        ingredients: [],
                        instructions: [],
                        cookTime: '',
                        serves: ''
                    });
                    setShowAddForm(false);
                }
            };

            const convertSnippet = (id) => {
                setRecipes(recipes.map(recipe => {
                    if (recipe.id === id) {
                        const snippet = recipe.snippet.toLowerCase();
                        const suggestedIngredients = [];
                        const suggestedInstructions = [];
                        
                        const ingredientKeywords = ['coconut', 'chilies', 'fish', 'curry leaves', 'mustard seeds', 'tamarind', 'onions', 'oil', 'turmeric', 'ginger', 'garlic'];
                        ingredientKeywords.forEach(ingredient => {
                            if (snippet.includes(ingredient)) {
                                suggestedIngredients.push(ingredient.charAt(0).toUpperCase() + ingredient.slice(1));
                            }
                        });
                        
                        const sentences = recipe.snippet.split(/[.!]/).filter(s => s.trim());
                        sentences.forEach(sentence => {
                            if (sentence.trim()) {
                                suggestedInstructions.push(sentence.trim().charAt(0).toUpperCase() + sentence.trim().slice(1));
                            }
                        });
                        
                        return {
                            ...recipe,
                            ingredients: suggestedIngredients,
                            instructions: suggestedInstructions,
                            isComplete: true
                        };
                    }
                    return recipe;
                }));
            };

            const shareRecipe = (recipe) => {
                const shareText = `${recipe.name}\n\nIngredients:\n${recipe.ingredients.map(ing => `â€¢ ${ing}`).join('\n')}\n\nInstructions:\n${recipe.instructions.map((inst, i) => `${i + 1}. ${inst}`).join('\n')}\n\nCook Time: ${recipe.cookTime} | Serves: ${recipe.serves}`;
                
                if (navigator.share) {
                    navigator.share({
                        title: recipe.name,
                        text: shareText,
                    });
                } else {
                    navigator.clipboard.writeText(shareText);
                    alert('Recipe copied to clipboard!');
                }
            };

            const updateRecipeField = (id, field, value) => {
                setRecipes(recipes.map(recipe => 
                    recipe.id === id ? { ...recipe, [field]: value } : recipe
                ));
            };

            const addIngredient = (id, ingredient) => {
                if (ingredient.trim()) {
                    setRecipes(recipes.map(recipe => 
                        recipe.id === id 
                            ? { ...recipe, ingredients: [...recipe.ingredients, ingredient.trim()] }
                            : recipe
                    ));
                }
            };

            const addInstruction = (id, instruction) => {
                if (instruction.trim()) {
                    setRecipes(recipes.map(recipe => 
                        recipe.id === id 
                            ? { ...recipe, instructions: [...recipe.instructions, instruction.trim()] }
                            : recipe
                    ));
                }
            };

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Header */}
                    <div className="bg-white border-b border-gray-100">
                        <div className="max-w-4xl mx-auto px-8 py-12">
                            <h1 className="text-4xl font-light text-gray-900 mb-3">Mom's Konkan Kitchen</h1>
                            <p className="text-gray-500 text-lg font-light">Preserving family recipes, one call at a time</p>
                        </div>
                    </div>

                    <div className="max-w-4xl mx-auto px-8 py-16">
                        {/* Add Recipe Button */}
                        <div className="mb-16">
                            <button
                                onClick={() => setShowAddForm(true)}
                                className="bg-black text-white px-8 py-4 text-sm font-medium hover:bg-gray-800 transition-colors duration-200 flex items-center gap-3"
                            >
                                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                </svg>
                                Add New Recipe
                            </button>
                        </div>

                        {/* Add Recipe Form */}
                        {showAddForm && (
                            <div className="bg-white p-12 mb-16 shadow-sm border border-gray-100">
                                <div className="flex justify-between items-start mb-8">
                                    <h3 className="text-2xl font-light text-gray-900">What did Mom say?</h3>
                                    <button 
                                        onClick={() => setShowAddForm(false)}
                                        className="p-2 hover:bg-gray-50 transition-colors duration-200"
                                    >
                                        <svg className="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M6 18L18 6M6 6l12 12"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <div className="space-y-8">
                                    <input
                                        type="text"
                                        placeholder="Recipe name"
                                        value={newRecipe.name}
                                        onChange={(e) => setNewRecipe({...newRecipe, name: e.target.value})}
                                        className="w-full p-4 border border-gray-200 text-lg font-light focus:ring-1 focus:ring-gray-300 focus:border-gray-300 transition-colors duration-200"
                                    />
                                    
                                    <textarea
                                        placeholder="Paste exactly what mom said - don't worry about formatting..."
                                        value={newRecipe.snippet}
                                        onChange={(e) => setNewRecipe({...newRecipe, snippet: e.target.value})}
                                        className="w-full p-4 border border-gray-200 h-32 resize-none text-lg font-light focus:ring-1 focus:ring-gray-300 focus:border-gray-300 transition-colors duration-200"
                                    />
                                    
                                    <div className="grid grid-cols-2 gap-6">
                                        <input
                                            type="text"
                                            placeholder="Cook time"
                                            value={newRecipe.cookTime}
                                            onChange={(e) => setNewRecipe({...newRecipe, cookTime: e.target.value})}
                                            className="p-4 border border-gray-200 text-lg font-light focus:ring-1 focus:ring-gray-300 focus:border-gray-300 transition-colors duration-200"
                                        />
                                        <input
                                            type="text"
                                            placeholder="Serves"
                                            value={newRecipe.serves}
                                            onChange={(e) => setNewRecipe({...newRecipe, serves: e.target.value})}
                                            className="p-4 border border-gray-200 text-lg font-light focus:ring-1 focus:ring-gray-300 focus:border-gray-300 transition-colors duration-200"
                                        />
                                    </div>
                                    
                                    <button
                                        onClick={addRecipe}
                                        className="bg-black text-white px-8 py-4 text-sm font-medium hover:bg-gray-800 transition-colors duration-200"
                                    >
                                        Save Recipe
                                    </button>
                                </div>
                            </div>
                        )}

                        {/* Recipes */}
                        <div className="space-y-12">
                            {recipes.map(recipe => (
                                <div key={recipe.id} className="bg-white shadow-sm border border-gray-100">
                                    {/* Recipe Header */}
                                    <div className="p-12 border-b border-gray-50">
                                        <div className="flex justify-between items-start">
                                            <div>
                                                <h3 className="text-2xl font-light text-gray-900 mb-4">{recipe.name}</h3>
                                                <div className="flex items-center gap-8 text-gray-500 text-sm">
                                                    {recipe.cookTime && <span>{recipe.cookTime}</span>}
                                                    {recipe.serves && <span>Serves {recipe.serves}</span>}
                                                </div>
                                            </div>
                                            <div className="flex gap-3">
                                                <button
                                                    onClick={() => setEditingId(editingId === recipe.id ? null : recipe.id)}
                                                    className="p-3 hover:bg-gray-50 transition-colors duration-200"
                                                >
                                                    <svg className="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                                    </svg>
                                                </button>
                                                <button
                                                    onClick={() => shareRecipe(recipe)}
                                                    className="p-3 hover:bg-gray-50 transition-colors duration-200"
                                                >
                                                    <svg className="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
                                                    </svg>
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="p-12">
                                        {/* Original Snippet */}
                                        <div className="mb-12 p-8 bg-rose-50 border border-rose-100">
                                            <h4 className="text-sm font-medium text-gray-600 mb-4 uppercase tracking-wide">Mom's Words</h4>
                                            <p className="text-gray-700 text-lg font-light italic leading-relaxed">"{recipe.snippet}"</p>
                                            {!recipe.isComplete && (
                                                <button
                                                    onClick={() => convertSnippet(recipe.id)}
                                                    className="mt-6 bg-black text-white px-6 py-3 text-sm font-medium hover:bg-gray-800 transition-colors duration-200"
                                                >
                                                    Convert to Recipe
                                                </button>
                                            )}
                                        </div>

                                        {/* Full Recipe */}
                                        {recipe.isComplete && (
                                            <div className="grid md:grid-cols-2 gap-16">
                                                {/* Ingredients */}
                                                <div>
                                                    <h4 className="text-sm font-medium text-gray-600 mb-6 uppercase tracking-wide">Ingredients</h4>
                                                    <div className="space-y-4">
                                                        {recipe.ingredients.map((ingredient, index) => (
                                                            <div key={index} className="flex items-start gap-4">
                                                                <div className="w-2 h-2 bg-rose-300 rounded-full mt-3 flex-shrink-0"></div>
                                                                {editingId === recipe.id ? (
                                                                    <input
                                                                        type="text"
                                                                        value={ingredient}
                                                                        onChange={(e) => {
                                                                            const newIngredients = [...recipe.ingredients];
                                                                            newIngredients[index] = e.target.value;
                                                                            updateRecipeField(recipe.id, 'ingredients', newIngredients);
                                                                        }}
                                                                        className="flex-1 p-2 border border-gray-200 text-gray-700 font-light"
                                                                    />
                                                                ) : (
                                                                    <span className="text-gray-700 font-light text-lg">{ingredient}</span>
                                                                )}
                                                            </div>
                                                        ))}
                                                    </div>
                                                    {editingId === recipe.id && (
                                                        <input
                                                            type="text"
                                                            placeholder="Add ingredient"
                                                            onKeyPress={(e) => {
                                                                if (e.key === 'Enter') {
                                                                    addIngredient(recipe.id, e.target.value);
                                                                    e.target.value = '';
                                                                }
                                                            }}
                                                            className="w-full p-3 border border-gray-200 text-sm mt-4"
                                                        />
                                                    )}
                                                </div>

                                                {/* Instructions */}
                                                <div>
                                                    <h4 className="text-sm font-medium text-gray-600 mb-6 uppercase tracking-wide">Instructions</h4>
                                                    <div className="space-y-6">
                                                        {recipe.instructions.map((instruction, index) => (
                                                            <div key={index} className="flex gap-6">
                                                                <div className="w-8 h-8 bg-black text-white flex items-center justify-center text-sm font-medium flex-shrink-0">
                                                                    {index + 1}
                                                                </div>
                                                                {editingId === recipe.id ? (
                                                                    <textarea
                                                                        value={instruction}
                                                                        onChange={(e) => {
                                                                            const newInstructions = [...recipe.instructions];
                                                                            newInstructions[index] = e.target.value;
                                                                            updateRecipeField(recipe.id, 'instructions', newInstructions);
                                                                        }}
                                                                        className="flex-1 p-3 border border-gray-200 resize-none font-light"
                                                                        rows="2"
                                                                    />
                                                                ) : (
                                                                    <span className="flex-1 text-gray-700 font-light text-lg leading-relaxed">{instruction}</span>
                                                                )}
                                                            </div>
                                                        ))}
                                                    </div>
                                                    {editingId === recipe.id && (
                                                        <textarea
                                                            placeholder="Add instruction"
                                                            onKeyPress={(e) => {
                                                                if (e.key === 'Enter' && !e.shiftKey) {
                                                                    e.preventDefault();
                                                                    addInstruction(recipe.id, e.target.value);
                                                                    e.target.value = '';
                                                                }
                                                            }}
                                                            className="w-full p-3 border border-gray-200 text-sm mt-4"
                                                            rows="2"
                                                        />
                                                    )}
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            ))}
                        </div>

                        {recipes.length === 0 && (
                            <div className="text-center py-24">
                                <div className="w-16 h-16 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center">
                                    <svg className="w-8 h-8 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                                    </svg>
                                </div>
                                <h3 className="text-xl font-light text-gray-900 mb-2">No recipes yet</h3>
                                <p className="text-gray-500 font-light">Start by adding your first recipe from mom</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<RecipeApp />, document.getElementById('root'));
    </script>
</body>
</html>
